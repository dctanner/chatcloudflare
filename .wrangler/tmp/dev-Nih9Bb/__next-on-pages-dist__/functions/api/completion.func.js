import{__chunk_416 as k,__chunk_768 as E}from"../../../__next-on-pages-dist__/webpack/2a1785ed5794c39847210631922b41fa.js";var C={};(()=>{"use strict";var _={},h={};function o(t){var i=h[t];if(i!==void 0)return i.exports;var a=h[t]={exports:{}},f=!0;try{_[t](a,a.exports,o),f=!1}finally{f&&delete h[t]}return a.exports}o.m=_,(()=>{var t=[];o.O=(i,a,f,c)=>{if(a){c=c||0;for(var l=t.length;l>0&&t[l-1][2]>c;l--)t[l]=t[l-1];t[l]=[a,f,c];return}for(var m=1/0,l=0;l<t.length;l++){for(var[a,f,c]=t[l],d=!0,p=0;p<a.length;p++)(c&!1||m>=c)&&Object.keys(o.O).every(y=>o.O[y](a[p]))?a.splice(p--,1):(d=!1,c<m&&(m=c));if(d){t.splice(l--,1);var u=f();u!==void 0&&(i=u)}}return i}})(),o.d=(t,i)=>{for(var a in i)o.o(i,a)&&!o.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:i[a]})},o.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),o.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),o.r=t=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t={993:0};o.O.j=f=>t[f]===0;var i=(f,c)=>{var[l,m,d]=c,p,u,e=0;if(l.some(r=>t[r]!==0)){for(p in m)o.o(m,p)&&(o.m[p]=m[p]);if(d)var s=d(o)}for(f&&f(c);e<l.length;e++)u=l[e],o.o(t,u)&&t[u]&&t[u][0](),t[u]=0;return o.O(s)},a=self.webpackChunk_N_E=self.webpackChunk_N_E||[];a.forEach(i.bind(null,0)),a.push=i.bind(null,a.push.bind(a))})()})();(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[896],{756:(_,h,o)=>{"use strict";o.r(h),o.d(h,{default:()=>f});var t=o(416);(0,t.g)();var i=o(250),a=i.middleware||i.default;if(typeof a!="function")throw Error('The Edge Function "pages/api/completion" must export a `default` function');function f(c){return(0,t.V)({...c,page:"/api/completion",handler:a})}},250:(_,h,o)=>{"use strict";o.r(h),o.d(h,{config:()=>i,default:()=>a});let t=async(f,c)=>{let l=process.env.CLOUDFLARE_ACCOUNT_ID,m=process.env.CLOUDFLARE_API_KEY,d=JSON.stringify({messages:c.messages});console.log(d);let p=await fetch(`https://api.cloudflare.com/client/v4/accounts/${l}/ai/run/@cf/mistral/mistral-7b-instruct-v0.1`,{headers:{Authorization:`Bearer ${m}`},method:"POST",body:d});if(!p.ok){let s=await p.text();throw console.log(s),Error(s)}let u=await p.text();return JSON.parse(u).result.response.trim()},i={runtime:"edge"};async function a(f,c){let{model:l,max_tokens:m,temperature:d,top_p:p,frequency_penalty:u,presence_penalty:e,messages:s}=await f.json();if(!s)return new Response("Missing messages",{status:400});try{let r=await t("test",{messages:s});return new Response(r)}catch(r){return new Response(r.message||"Error fetching response.",{status:500})}}},768:E,416:k},_=>{var h=_(_.s=756);(C=typeof C>"u"?{}:C)["middleware_pages/api/completion"]=h}]);var P=function(){let _={exports:{},loaded:!1};return function(o,t){var i=Object.defineProperty,a=e=>i(e,"__esModule",{value:!0}),f=(e,s)=>{a(e);for(var r in s)i(e,r,{get:s[r],enumerable:!0})};f(t,{default:()=>m});function c(e){let s={};return e&&e.forEach((r,n)=>{s[n]=r,n.toLowerCase()==="set-cookie"&&(s[n]=l(r))}),s}function l(e){let s=[],r=0,n,y,g,b,w;function v(){for(;r<e.length&&/\s/.test(e.charAt(r));)r+=1;return r<e.length}function x(){return y=e.charAt(r),y!=="="&&y!==";"&&y!==","}for(;r<e.length;){for(n=r,w=!1;v();)if(y=e.charAt(r),y===","){for(g=r,r+=1,v(),b=r;r<e.length&&x();)r+=1;r<e.length&&e.charAt(r)==="="?(w=!0,r=b,s.push(e.substring(n,g)),n=r):r=g+1}else r+=1;(!w||r>=e.length)&&s.push(e.substring(n,e.length))}return s}function m(e){let s=e.staticRoutes.map(n=>({regexp:new RegExp(n.namedRegex),page:n.page})),r=e.dynamicRoutes?.map(n=>({regexp:new RegExp(n.namedRegex),page:n.page}))||[];return async function(n,y){let g=new URL(n.url).pathname,b={};if(e.nextConfig?.basePath&&g.startsWith(e.nextConfig.basePath)&&(g=g.replace(e.nextConfig.basePath,"")||"/"),e.nextConfig?.i18n)for(let v of e.nextConfig.i18n.locales){let x=new RegExp(`^/${v}($|/)`,"i");if(g.match(x)){g=g.replace(x,"/")||"/";break}}for(let v of s)if(v.regexp.exec(g)){b.name=v.page;break}if(!b.name){let v=p(g);for(let x of r||[]){if(v&&!p(x.page))continue;let R=x.regexp.exec(g);if(R){b={name:x.page,params:R.groups};break}}}let w=await C[`middleware_${e.name}`].default.call({},{request:{url:n.url,method:n.method,headers:c(n.headers),ip:d(n.headers,u.Ip),geo:{city:d(n.headers,u.City,!0),country:d(n.headers,u.Country,!0),latitude:d(n.headers,u.Latitude),longitude:d(n.headers,u.Longitude),region:d(n.headers,u.Region,!0)},nextConfig:e.nextConfig,page:b,body:n.body}});return y.waitUntil(w.waitUntil),w.response}}function d(e,s,r=!1){let n=e.get(s)||void 0;return r&&n?decodeURIComponent(n):n}function p(e){return e==="/api"||e.startsWith("/api/")}var u;(function(e){e.City="x-vercel-ip-city",e.Country="x-vercel-ip-country",e.Ip="x-real-ip",e.Latitude="x-vercel-ip-latitude",e.Longitude="x-vercel-ip-longitude",e.Region="x-vercel-ip-country-region"})(u||(u={}))}(_,_.exports),_.exports}.call({}).default({name:"pages/api/completion",staticRoutes:[{page:"/",regex:"^/(?:/)?$",routeKeys:{},namedRegex:"^/(?:/)?$"},{page:"/playground",regex:"^/playground(?:/)?$",routeKeys:{},namedRegex:"^/playground(?:/)?$"}],dynamicRoutes:[{page:"/chat/[id]",regex:"^/chat/([^/]+?)(?:/)?$",routeKeys:{id:"id"},namedRegex:"^/chat/(?<id>[^/]+?)(?:/)?$"}],nextConfig:{basePath:""}});export{P as default};
